<h3><span [innerHTML]="'Platform Analytics' | translate"></span></h3>

<div class="row">
  <div class="col-12">
      <!-- Product Tabs -->
      <ul class="nav nav-tabs">
          <ng-container *ngIf="config.kibanaEnabled">
              <li class="nav-item">
                  <a href id="LOG" class="nav-link"
                      [ngClass]="{ active: selectedTab === 'LOG'}"
                      (click)="onSelectTab($event,'LOG')">
                      <span [innerHTML]="'Log Analytics' | translate"></span>
                  </a>
              </li>
          </ng-container>
          <li  class="nav-item">
              <a href id="DB" class="nav-link"
                  [ngClass]="{ active: selectedTab === 'DB'}"
                  (click)="onSelectTab($event,'DB')">
                  <span [innerHTML]="'Database Analytics' | translate"></span>
              </a>
          </li>
      </ul>
  </div>
</div>

<call-status [callStatus]="callStatus" [large]="true"></call-status>

<div [hidden]="isLoading()" class="space-before">

  <div [hidden]="selectedTab !== 'LOG'">
    <div *ngFor="let dashboard of dashboards">
    <div class="row">
      <div class="col">
        <h6>{{dashboard.title}}</h6>
        <iframe [src]="dashboard.safeUrl"
                height="375" width="100%" frameborder="0" class="border"></iframe>
      </div>
    </div>
    <hr>
  </div>

  </div>

  <div *ngIf="selectedTab === 'DB'">

    <div class="row justify-content-center">
      <div class="card col-3">
        <div class="card-body text-center">
          <h4 *ngIf="user_count>=0" class="card-title"><b>{{user_count}}</b></h4>
          <h4 *ngIf="user_count<0" class="card-title"><b>???</b></h4>
          <h6 class="card-subtitle mb-2 text-muted"><span [innerHTML]="'Registered Users' | translate"></span></h6>
          <p class="card-text" style="font-size:32px"><i class="fa fa-user"></i></p>
        </div>
      </div>
      <div class="col-1"></div>
      <div class="card col-3">
        <div class="card-body text-center">
          <h4 *ngIf="comp_count>=0" class="card-title"><b>{{comp_count}}</b></h4>
          <h4 *ngIf="comp_count<0" class="card-title"><b>???</b></h4>
          <h6 class="card-subtitle mb-2 text-muted"><span [innerHTML]="'Registered Companies' | translate"></span></h6>
          <p class="card-text" style="font-size:32px"><i class="fa fa-building"></i></p>
        </div>
      </div>
    </div>

    <hr>

    <div class="row justify-content-center" *ngIf="loadedps">
      <div class="card col-3">
        <div class="card-body text-center">
          <h4 *ngIf="user_count>=0" class="card-title"><b>{{product_count}}</b></h4>
          <h4 *ngIf="user_count<0" class="card-title"><b>???</b></h4>
          <h6 class="card-subtitle mb-2 text-muted">No Of Products</h6>
          <p class="card-text" style="font-size:32px"><i class="fa fa-cog"></i></p>
        </div>
      </div>
      <div class="col-1"></div>
      <div class="card col-3">
        <div class="card-body text-center">
          <h4 *ngIf="comp_count>=0" class="card-title"><b>{{service_count}}</b></h4>
          <h4 *ngIf="comp_count<0" class="card-title"><b>???</b></h4>
          <h6 class="card-subtitle mb-2 text-muted"><span [innerHTML]="'No Of Services' | translate"></span></h6>
          <p class="card-text" style="font-size:32px"><i class="fa fa-wrench"></i></p>
        </div>
      </div>
    </div>

    <hr>

    <div class="row justify-content-center">
      <div class="card col-3">
        <div class="card-body text-center">
          <h4 *ngIf="bp_count>=0" class="card-title"><b>{{bp_count}}</b></h4>
          <h4 *ngIf="bp_count<0" class="card-title"><b>???</b></h4>
          <h6 class="card-subtitle mb-2 text-muted"><span [innerHTML]="'Executed Business Transactions' | translate"></span></h6>
          <p class="card-text" style="font-size:32px"><i class="fa fa-briefcase"></i></p>
        </div>
      </div>
      <div class="col-1"></div>
      <div class="col-6">
        <div *ngIf="bp_count>0" class="progress mt-5">
          <div class="progress-bar bg-success" role="progressbar" [ngStyle]="{'width':green_perc_str}" [attr.aria-valuenow]="green_perc" aria-valuemin="0" aria-valuemax="100"></div>
          <div class="progress-bar bg-warning" role="progressbar" [ngStyle]="{'width':yellow_perc_str}" [attr.aria-valuenow]="yellow_perc" aria-valuemin="0" aria-valuemax="100"></div>
          <div class="progress-bar bg-danger" role="progressbar" [ngStyle]="{'width':red_perc_str}" [attr.aria-valuenow]="red_perc" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div *ngIf="bp_count>0" class="space-before text-center">
          <span class="badge badge-pill badge-success">{{green_perc_str}} Approved</span>
          <span class="badge badge-pill badge-warning">{{yellow_perc_str}} Waiting</span>
          <span class="badge badge-pill badge-danger">{{red_perc_str}} Rejected</span>
        </div>
      </div>
    </div>

    <hr>

    <div class="row justify-content-center">
      <div class="card col-3">
        <div class="card-body text-center">
          <h4 *ngIf="trade_count>=0" class="card-title"><b>{{trade_count}}â‚¬</b></h4>
          <h4 *ngIf="trade_count<0" class="card-title"><b>???</b></h4>
          <h6 class="card-subtitle mb-2 text-muted"><span [innerHTML]="'Trading Volume' | translate"></span></h6>
          <p class="card-text" style="font-size:32px"><i class="fa fa-money-bill"></i></p>
        </div>
      </div>
      <div class="col-1"></div>
      <div class="col-6">
        <div *ngIf="trade_count>0" class="progress mt-5">
          <div class="progress-bar bg-success" role="progressbar" [ngStyle]="{'width':trade_green_perc_str}" [attr.aria-valuenow]="trade_green_perc" aria-valuemin="0" aria-valuemax="100"></div>
          <div class="progress-bar bg-warning" role="progressbar" [ngStyle]="{'width':trade_yellow_perc_str}" [attr.aria-valuenow]="trade_yellow_perc" aria-valuemin="0" aria-valuemax="100"></div>
          <div class="progress-bar bg-danger" role="progressbar" [ngStyle]="{'width':trade_red_perc_str}" [attr.aria-valuenow]="trade_red_perc" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div *ngIf="trade_count>0" class="space-before text-center">
          <span class="badge badge-pill badge-success">{{trade_green_perc_str}} Approved</span>
          <span class="badge badge-pill badge-warning">{{trade_yellow_perc_str}} Waiting</span>
          <span class="badge badge-pill badge-danger">{{trade_red_perc_str}} Rejected</span>
        </div>
      </div>
    </div>

  </div>

</div>
