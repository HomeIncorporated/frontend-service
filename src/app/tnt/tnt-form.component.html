<div>
    <p class="nimble-title"><span [innerHTML]="'Track Your Product' | translate"></span></p>
    <form class="space-before" (ngSubmit)="Search(model.q)" #trackForm="ngForm" novalidate>
        <div class="form-group row">
            <label class="col-2 col-form-label"><span [innerHTML]="'Enter EPC Code' | translate"></span></label>
            <div class="col-10">
                <div class="input-group">
                    <input type="text"
                           class="form-control" required [(ngModel)]="model.q"
                           name="trackSearch" #q="ngModel" pattern=".{1,}"
                           [placeholder]="'Your SGTIN Code' | translate">
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-outline-secondary" [disabled]="!trackForm.form.valid">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div [hidden]="!error_detc">
        <div class="alert alert-danger space-before"
             role="alert">
            <p>
                <em><span [innerHTML]="'An Error Occured' | translate"></span></em> - <span [innerHTML]="'tnt-error' | translate"></span>
            </p>
            <p *ngIf="falsecode">
                <i class="fa fa-exclamation pr-1"></i> <span><em>{{falsecode}}</em></span>
            </p>
        </div>
    </div>
</div>

<div class="jumbotron" *ngIf="!trackingInfo.length">
    <div class="container">
        <div class="row">
            <div class="col-md-12 align-center">
                <i class="fas fa-truck-loading fa-5x"></i>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 align-center">
                <h4><span [innerHTML]="'No Tracking Results' | translate"></span></h4>
                <p class="text-secondary"><span [innerHTML]="'Try searching for a valid tracking code above' | translate"></span></p>
            </div>
        </div>
    </div>
</div>

<div class="row" *ngIf="trackingInfo.length">
    <div class="col-lg-8">
        <h4><span [innerHTML]="'Tracking Information' | translate"></span></h4>
        <!--<div class="row">-->
            <table class="table table-hover">
            <thead class="thead-dark">
            <tr>
            <th><span [innerHTML]="'Event Time' | translate"></span></th>
            <th><span [innerHTML]="'Business Step' | translate"></span></th>
            <!-- <th>Action</th> -->
            <th><span [innerHTML]="'Read Point' | translate"></span></th>
            <th><span [innerHTML]="'Business Location' | translate"></span></th>
            </tr>
            </thead>

            <tr *ngFor="let entry of trackingInfo">
            <td>{{entry.eventTime}}</td>
            <td>{{entry.bizStep}}</td>
            <!-- <td>{{entry.action}}</td> -->
                <td><button class="btn btn-link" (click)="getGateInfo(entry.readPoint)">{{entry.readPoint}}</button></td>
                <td><button class="btn btn-link" (click)="getBizLocInfo(entry.bizLocation)">{{entry.bizLocation}}</button></td>
            </tr>
            </table>
            <div class="row" *ngIf="trackingInfo.length">
                <ngb-alert type="success" [dismissible]="false" *ngIf="verified">
                    <i class="fas fa-check-circle pr-1"></i> <span [innerHTML]="'This Data is Verified by BlockChain' | translate"></span>  <i class="fas fa-project-diagram pl-1"></i> </ngb-alert>
            </div>
        <!--</div>-->
    </div>
    <div class="col-lg-4" *ngIf="gateInformation.length || bizLocationInformation.length">
        <h4><span [innerHTML]="'Additional Details' | translate"></span></h4>
        <!--<div class="row">-->
            <!--{{gateInformation | json}}-->
            <!--{{bizLocationInformation | json}}-->
            <div class="card" *ngIf="gateInformation.length">
                <div class="card-header">
                    <strong>{{currentGate}}</strong>
                </div>
                <ul class="list-group list-group-flush" *ngFor="let eachInfo of gateInformation">
                    <li class="list-group-item">{{eachInfo['attributes']['urn:epcglobal:cbv:mda#name']}}</li>
                    <li class="list-group-item">{{eachInfo['attributes']['urn:epcglobal:cbv:mda:site']}}</li>
                    <li class="list-group-item">{{eachInfo['attributes']['urn:epcglobal:cbv:mda#streetAddressOne']}}, {{eachInfo['attributes']['urn:epcglobal:cbv:mda#city']}}</li>
                    <li class="list-group-item">{{eachInfo['attributes']['urn:epcglobal:cbv:mda#countryCode']}}</li>
                </ul>
            </div>
            <!--<div class="row">-->
            <div class="card" *ngIf="bizLocationInformation.length">
                <div class="card-header">
                    <strong>{{currentBizLoc}}</strong>
                </div>
                <ul class="list-group list-group-flush" *ngFor="let eachInfo of bizLocationInformation">
                    <li class="list-group-item">{{eachInfo['attributes']['urn:epcglobal:cbv:mda#name']}}</li>
                    <li class="list-group-item">{{eachInfo['attributes']['urn:epcglobal:cbv:mda:site']}}</li>
                    <li class="list-group-item">{{eachInfo['attributes']['urn:epcglobal:cbv:mda#streetAddressOne']}}, {{eachInfo['attributes']['urn:epcglobal:cbv:mda#city']}}</li>
                    <li class="list-group-item">{{eachInfo['attributes']['urn:epcglobal:cbv:mda#countryCode']}}</li>
                </ul>
            </div>
            <!--</div>-->
        <!--</div>-->
    </div>
</div>

<!--<div>-->
<!--<pre>{{trackingInfo | json}}</pre>-->
<!--</div>-->
